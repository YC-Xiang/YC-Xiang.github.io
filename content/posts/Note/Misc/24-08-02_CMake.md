---
title: Cmake笔记
date: 2024-11-13 21:32:28
tags:
  - Tool
categories:
  - Notes
---

# Cmake Tutorial

https://cmake.org/cmake/help/latest/guide/tutorial/index.html

## Step 1

# CMake Reference

https://cmake.org/cmake/help/latest/

## cmake

### Introduction to CMake Buildsystems

To generate a buildsystem with CMake, the following must be selected:

Source Tree:

源文件目录，包含 top-level 的 CMakeLists.txt。

Build Tree:

编译输出文件，包含 CMakeCache.txt。

Generator:

选择 buildsystem 的 generator，比如 make, ninja 等，利用-G 选项来选择。

### Generate a Project Buildsystem

以下几种命令用来指定 source 和 build tree，生成 buildsystem：

`cmake [<options>] -B <path-to-build> [-S <path-to-source>]`

-S 选择顶层 CMakeLists.txt 所在目录。

-B 选择编译输出目录，如果不存在会自动创建。

```cmake
cmake -S src -B build
```

</br>

`cmake [<options>] <path-to-source>`

如果不指定-B 编译目录，那么默认当前目录为编译目录。需要指定 path-to-source 即顶层 CMakeLists.txt 所在目录，注意这两个目录不能为同一个目录。

```cmake
mkdir build ; cd build
cmake ../src
```

</br>

`cmake [<options>] <path-to-existing-build>`

如果已经编译过了，那么可以在 build 目录下执行 cmake，会自动从 CMakeCache.txt 中加载 source tree 的路径。

```cmake
cd build
cmake .
```

</br>

有多种组合，如下图：

If only one type of path is given, the current working directory (cwd) is used for the other.

![](https://xyc-1316422823.cos.ap-shanghai.myqcloud.com/20241113230053.png)
